# Тестовое задание для отбора на Летнюю ИТ-школу КРОК по разработке

## Условие задания
Однажды теплым летним вечером вас посетила идея разработать свое расширение для браузера для построения ссылочного графа. Что это означает на практике — ваше расширение активируется на какой-либо web-странице сайта, определяет список уникальных внешних ссылок, после чего повторяет алгоритм для каждой ссылки. Максимальная глубина поиска, визуализация собранных данных и прочие вопросы вы сочли вторичными, а начать решено было с малого — с обходчика страниц, который бы находил уникальные ссылки.

В процессе проектирования вы решили немного упростить ваш mvp и в итоге поставили себе задачу следующим образом: реализовать поиск всех уникальных ресурсов (доменов) в рамках страницы, на которые есть ссылки. При этом, формулируя задачу, вы сделали следующие допущения:
- Доменом считается запись вида example.com;
- Поддомен, например, sub.example.com,  считается отдельным ресурсом;
- Протокол (при наличии) не имеет значения.

Требования к реализации:
1. Реализация должна содержать, как минимум, одну процедуру (функцию/метод), отвечающую за поиск уникальных ресурсов, и должна быть описана в readme.md в соответствии с чек-листом;
2. В качестве входных данных программа использует реальный html-файл (page.html)	, считав который, начинает выполнять поиск;
3. Процедура (функция/метод) поиска должна возвращать строку в формате json следующего формата:
   - {«sites»: [«mail.ru», «rbc.ru», «ria.ru»]}
4. Найденные в соответствии с условием задачи домены должны выводиться в нижнем регистре без указания протокола и «www» в алфавитном порядке.

## Автор решения
Хаперский Матвей Денисович

## Описание реализации

Основной блок кода назначает обработчик клика на кнопку "Scan", который вызывает функцию findLinks.

Функция findLinks получает HTML-разметку страницы и передает ее в функцию findLinksUsingRegex.
Получив JSON-строку из findLinksUsingRegex, findLinks передает данные в функцию displayLinks, которая выводит информацию на экран.

Функция findLinksUsingRegex отвечает за поиск всех ссылок на странице с использованием регулярного выражения. 
Она извлекает значения атрибута href из HTML-разметки и фильтрует их, 
оставляя только те, которые начинаются с "//", "http://" или "https://", ибо так обозначаются внешние ссылки.

Функция displayLinks форматирует найденные ссылки (удаляет протокол, www и приводит к нижнему регистру), 
удаляет дубликаты и сортирует их по алфавиту. 
Затем она создаёт JSON-строку из уникальных и отсортированных ссылок и передает ее в функцию displayContent.

Функция displayContent отвечает за создание блока с текстом и его вывод на экран. 
Она также создаёт кнопку "Copy", которая позволяет скопировать JSON-строку в буфер обмена.

## Инструкция по сборке и запуску решения
Для запуска на машине должен быть установлен Google Chrome не ниже версии 89.

В первую очередь нужно склонировать проект на локальную машину.
Для этого перейдите в удобную папку, откройте в ней терминал и введите:
```bash
git clone https://github.com/MelonPowerr/school2024-test-task3
```
Далее перейдите в Chrome => Расширения => Управление расширениями => Загрузить распакованное расширение

Выбираете склонированную папку проекта.

Теперь достаточно перейти на интересующий сайт, выбрать ScanForLinks в меню выбора расширений, потом нажать на кнопку Scan.

В результате, если на сайте имеются внешние ссылки, мы получим ответ такого типа:
```json
{"sites":["avatars.githubusercontent.com","docs.github.com","education.github.com","github-cloud.s3.amazonaws.com","github.blog","github.com","github.githubassets.com"]}
```
Если ссылок нет:
```json
{"sites":[]}
```
В случае ошибки:
```
Script execution failed or returned no result
```
